/*
 * @LastEditors: aFei
 * @LastEditTime: 2022-12-05 15:42:41
*/
(function(r){typeof define=="function"&&define.amd?define(r):r()})(function(){"use strict";let r=$("#cc")[0],l=r.getContext("2d"),P=$("#c")[0],t=P.getContext("2d"),u=7,i=u,e="",h,f,I=1,w=1e3,p=10,m=9,a,b="\u6211\u7231\u4F60\u5362\u83F2\uFF01",c=0,d=0,k,T=10,C,g,A=86,W=75,s=360,M,X=Math.PI,Y=b.split("").length+1;M=s/Y;let v=()=>{switch(i){case 7:e="red";break;case 6:e="orange";break;case 5:e="yellow";break;case 4:e="green";break;case 3:e="cyan";break;case 2:e="blue";break;case 1:e="purple";break}$(".countdown .time").attr("class","time "+e).html(i),i--,i<0&&(clearInterval(h),clearInterval(f),$(".top").hide(),setTimeout(function(){j()},400))},S=()=>{l.beginPath(),l.arc(150,150,140,-.5*Math.PI,(2/(u*w/p)*I-.5)*Math.PI),l.stroke(),I++},j=()=>{a=X,k=Math.PI/s*2,t.moveTo(x(a),y(a)),C=setInterval(B,T),g=setInterval(function(){$(".title .tail").css("display")==="block"?$(".title .tail").hide():$(".title .tail").show()},500)},B=()=>{a+=k,t.lineTo(x(a),y(a)),c++,t.stroke(),c>M*d&&(d++,$(".title .msg").html(b.slice(0,d))),c>=s&&(clearInterval(C),clearInterval(g),$(".title .tail").hide(),setTimeout(function(){t.fill(),$("#c").addClass("jump")},500))},x=n=>64+m*(16*Math.pow(Math.sin(n),3))+A,y=n=>49-m*(13*Math.cos(n)-5*Math.cos(2*n)-2*Math.cos(3*n)-Math.cos(4*n))+W;l.strokeStyle="#151515",l.lineWidth=20,t.strokeStyle="#eb2d2e",t.lineWidth=1,t.shadowBlur=5,t.shadowColor="rgba(253,36,61,0.1)";let o=t.createLinearGradient(500,450,500,0);o.addColorStop(0,"#fd4d4e"),o.addColorStop(.2,"#ed3132"),o.addColorStop(.8,"#eb2d2e"),o.addColorStop(1,"#fe5d5e"),t.fillStyle=o,v(),S(),h=setInterval(v,w),f=setInterval(S,p)});